{"version":3,"file":"index.js","sources":["../src/utils.js","../src/index.js"],"sourcesContent":["/* global window */\nconst matchPath = (pathname, candidate, exact) => {\n  if (typeof candidate === 'string') {\n    return exact === true\n      ? candidate === pathname\n      : pathname.slice(0, candidate.length) === candidate;\n  }\n\n  if (typeof candidate === 'function') {\n    return candidate(pathname);\n  }\n\n  if (candidate instanceof RegExp) {\n    return candidate.test(pathname);\n  }\n\n  throw new Error('react-title-config: path must be one of type string, function, array or RegExp!');\n};\n\nexport const match = (config, params) => {\n  const { pathname } = params;\n\n  return config.reduce((memo, descriptor) => {\n    if (memo) return memo;\n\n    if (Array.isArray(descriptor.path)) {\n      return descriptor.path.some(item => matchPath(pathname, item)) ? descriptor : memo;\n    }\n\n    return matchPath(pathname, descriptor.path, descriptor.exact) ? descriptor : memo;\n  }, null);\n};\n\nexport const getDefaultDescriptor = (defaultTitle) => {\n  const title = defaultTitle || '';\n  return { title, default: true };\n};\n\nexport const queryParamsFromSearch = (search) => {\n  const items = search.slice(1).split('&');\n\n  if (items.length) {\n    return items.reduce((memo, item) => {\n      const [name, value] = item.split('=');\n      return { ...memo, [name]: value === undefined ? true : value };\n    }, {});\n  }\n\n  return {};\n};\n\nexport const getTitle = (descriptor, params, extras) => {\n  if (typeof descriptor.title === 'string') {\n    return descriptor.title;\n  }\n\n  if (typeof descriptor.title === 'function') {\n    // eslint-disable-next-line\n    params.queryParams = queryParamsFromSearch(params.search);\n    return descriptor.title(params, descriptor, extras);\n  }\n\n  throw new Error(`react-title-config: title for ${descriptor.path} is neither a string or a function!`);\n};\n","/* global window document */\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {\n  match,\n  getTitle,\n  getDefaultDescriptor,\n} from './utils';\n\nconst TitleConfig = (props) => {\n  const { config, defaultTitle, prefix, ...extras } = props;\n\n  if (!Array.isArray(config)) {\n    throw new Error('react-title-config: config is not an Array!');\n  }\n\n  const { location } = window;\n\n  const params = {\n    hash: location.hash,\n    href: location.href,\n    search: location.search,\n    pathname: location.pathname,\n  };\n\n  const descriptor = match(config, params) || getDefaultDescriptor(defaultTitle);\n\n  if (descriptor) {\n    const title = getTitle(descriptor, params, extras);\n    document.title = (title && !descriptor.skipPrefix && !descriptor.default) ? prefix + title : title;\n  }\n\n  return null;\n};\n\nTitleConfig.defaultProps = {\n  prefix: '',\n  defaultTitle: '',\n};\n\nTitleConfig.propTypes = {\n  prefix: PropTypes.string,\n  defaultTitle: PropTypes.string,\n  config: PropTypes.arrayOf(PropTypes.shape({\n    exact: PropTypes.bool,\n    skipPrefix: PropTypes.bool,\n    title: PropTypes.oneOfType([PropTypes.string, PropTypes.func]).isRequired,\n    path: PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.func,\n      PropTypes.instanceOf(RegExp),\n      PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.string, PropTypes.func, PropTypes.instanceOf(RegExp)])),\n    ]).isRequired,\n  })).isRequired,\n};\n\nexport default TitleConfig;\n"],"names":["matchPath","pathname","candidate","exact","slice","length","RegExp","test","Error","match","config","params","reduce","memo","descriptor","Array","isArray","path","some","item","getDefaultDescriptor","defaultTitle","title","default","queryParamsFromSearch","search","items","split","name","value","undefined","getTitle","extras","queryParams","TitleConfig","props","prefix","window","location","hash","href","skipPrefix","defaultProps","propTypes","PropTypes","string","arrayOf","shape","bool","oneOfType","func","isRequired","instanceOf"],"mappings":"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"}